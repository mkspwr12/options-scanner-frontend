# UX Design: Vertical Navigation Sidebar

**Feature**: #10  
**Epic**: #9 (UX Redesign - Tabbed Layout)  
**Status**: Draft  
**Designer**: UX Designer Agent  
**Date**: 2026-02-16  
**Related PRD**: PRD-10.md Section 5.2

---

## Table of Contents

1. [Overview](#1-overview)
2. [User Research](#2-user-research)
3. [User Flows](#3-user-flows)
4. [Wireframes](#4-wireframes)
5. [Component Specifications](#5-component-specifications)
6. [Design System](#6-design-system)
7. [Interactions & Animations](#7-interactions--animations)
8. [Accessibility (WCAG 2.1 AA)](#8-accessibility-wcag-21-aa)
9. [Responsive Design](#9-responsive-design)
10. [Interactive Prototypes](#10-interactive-prototypes)
11. [Implementation Notes](#11-implementation-notes)
12. [Open Questions](#12-open-questions)
13. [References](#13-references)

---

## 1. Overview

### 1.1 Problem Statement

The current single-page layout requires users to scroll vertically through multiple sections (Scanner, Strategy Builder, Portfolio) making it difficult to:
- Quickly switch between different trading workflows
- Maintain context while navigating
- Understand which section they're currently viewing

### 1.2 Design Goal

Create a persistent left-aligned vertical navigation sidebar that provides instant access to 4 main application tabs, eliminating vertical scrolling and establishing clear visual hierarchy.

### 1.3 Success Criteria

- âœ… Navigation visible at all times (no scroll required)
- âœ… Active tab clearly indicated
- âœ… Sub-3-second task switching time
- âœ… Keyboard accessible (WCAG 2.1 AA compliant)
- âœ… Mobile-optimized (hamburger menu on <768px)

---

## 2. User Research

### 2.1 Target Users

**Primary**: Active options traders (10-50 trades/month)
- **Need**: Quick context switching between scanning, analysis, and portfolio monitoring
- **Pain Point**: Losing their place when scrolling through long pages
- **Benefit**: One-click navigation between workflows

**Secondary**: Portfolio managers (20-100 positions)
- **Need**: Rapid access to portfolio risk metrics
- **Pain Point**: Portfolio section buried below scanner
- **Benefit**: Dedicated Portfolio tab always accessible

### 2.2 Competitive Analysis

**Thinkorswim Desktop** (TD Ameritrade):
- âœ… Strong: Persistent left sidebar with icon+label tabs
- âœ… Strong: Clear active state with blue highlight
- âŒ Weak: No keyboard shortcuts visible

**Interactive Brokers TWS**:
- âœ… Strong: Detachable panels, highly customizable
- âŒ Weak: Overwhelming complexity for new users
- âŒ Weak: No responsive mobile layout

**Robinhood Web**:
- âœ… Strong: Minimal, clean bottom tab bar
- âŒ Weak: Limited workspace-style navigation
- âŒ Weak: No multi-monitor support

### 2.3 Key Insights

1. **Icon + Label > Icon Only**: Users need text labels for discoverability
2. **Active State Critical**: Clear visual feedback prevents confusion
3. **Keyboard Shortcuts**: Power users demand Cmd/Ctrl shortcuts
4. **Mobile**: Hamburger menu is expected pattern on small screens

---

## 3. User Flows

### 3.1 Primary Flow: Tab Switching via Click

```
User lands on homepage (default: Single Options tab)
  â†“
Views scanner results in main content area
  â†“
Spots sidebar on left with 4 tab buttons
  â†“
Clicks "Multi-Leg" tab button
  â†“
Content area fades out (100ms)
  â†“
Multi-Leg content fades in (100ms)
  â†“
URL updates to /scans/multi
  â†“
"Multi-Leg" tab button highlights (blue background)
  â†“
User continues analyzing multi-leg strategies
```

### 3.2 Secondary Flow: Tab Switching via Keyboard

```
User viewing Single Options tab
  â†“
Presses Cmd+2 (or Ctrl+2 on Windows)
  â†“
Focus shifts to Multi-Leg tab button
  â†“
Tab switches immediately (no additional Enter needed)
  â†“
Screen reader announces: "Multi-Leg tab, 2 of 4"
  â†“
User navigates tab content with Tab key
```

### 3.3 Mobile Flow: Hamburger Menu

```
User on mobile device (375px width)
  â†“
Sees hamburger menu icon (â˜°) top-left
  â†“
Taps hamburger icon
  â†“
Sidebar slides in from left (300ms ease-out)
  â†“
Overlay dims background (40% opacity)
  â†“
User taps "Portfolio" tab
  â†“
Sidebar slides out, Portfolio tab loads
  â†“
Background overlay fades out
```

### 3.4 Collapse/Expand Flow (Desktop)

```
User on desktop with full sidebar visible (240px)
  â†“
Hovers over collapse button (Â« icon)
  â†“
Button highlights (subtle background change)
  â†“
Clicks collapse button
  â†“
Sidebar animates to 60px width (200ms ease-in-out)
  â†“
Labels fade out, only icons visible
  â†“
Tooltip appears on icon hover showing full label
  â†“
User clicks expand button (Â» icon)
  â†“
Sidebar animates back to 240px
  â†“
Labels fade in
```

---

## 4. Wireframes

### 4.1 Desktop - Expanded Sidebar (240px)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Options Scanner     â”‚  Single Options Scan                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                      â”‚                                                â”‚
â”‚  ğŸ” Single Options   â”‚  [Filter Panel]                               â”‚
â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚                                                â”‚
â”‚                      â”‚  [Results Table with 100+ opportunities]      â”‚
â”‚  ğŸ¯ Multi-Leg        â”‚                                                â”‚
â”‚                      â”‚  [Payout charts + Probability badges]         â”‚
â”‚  ğŸ“ˆ Stock Scans      â”‚                                                â”‚
â”‚                      â”‚                                                â”‚
â”‚  ğŸ’¼ Portfolio        â”‚                                                â”‚
â”‚                      â”‚                                                â”‚
â”‚                      â”‚                                                â”‚
â”‚  [Â« Collapse]        â”‚                                                â”‚
â”‚                      â”‚                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 Desktop - Collapsed Sidebar (60px)

```
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  O â”‚  Single Options Scan                                          â”‚
â”‚  â”€ â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚    â”‚                                                                â”‚
â”‚ ğŸ” â”‚  [Filter Panel - more horizontal space available]            â”‚
â”‚    â”‚                                                                â”‚
â”‚    â”‚                                                                â”‚
â”‚ ğŸ¯ â”‚  [Results Table - wider columns]                              â”‚
â”‚    â”‚                                                                â”‚
â”‚ ğŸ“ˆ â”‚                                                                â”‚
â”‚    â”‚                                                                â”‚
â”‚ ğŸ’¼ â”‚                                                                â”‚
â”‚    â”‚                                                                â”‚
â”‚    â”‚                                                                â”‚
â”‚ Â»  â”‚                                                                â”‚
â”‚    â”‚                                                                â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 Mobile - Hamburger Menu (< 768px)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â˜°  Options Scanner              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                  â”‚
â”‚  Single Options Scan             â”‚
â”‚                                  â”‚
â”‚  [Filter Panel - Collapsed]      â”‚
â”‚                                  â”‚
â”‚  [Results Cards - Stacked]       â”‚
â”‚                                  â”‚
â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

(When hamburger tapped):

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Options Scanner         [âœ•]     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                  â”‚
â”‚  ğŸ” Single Options               â”‚
â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                â”‚
â”‚                                  â”‚
â”‚  ğŸ¯ Multi-Leg                    â”‚
â”‚                                  â”‚
â”‚  ğŸ“ˆ Stock Scans                  â”‚
â”‚                                  â”‚
â”‚  ğŸ’¼ Portfolio                    â”‚
â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
[Dim Overlay - tap to close]
```

---

## 5. Component Specifications

### 5.1 Sidebar Container

**Purpose**: Main container for navigation sidebar

**Dimensions**:
- Desktop Expanded: 240px width Ã— 100vh height
- Desktop Collapsed: 60px width Ã— 100vh height
- Mobile: Full width Ã— auto height (slide-out drawer)

**Visual Properties**:
- Background: `#1a1d29` (dark blue-gray)
- Border-right: `1px solid #2d3142` (subtle separator)
- Box-shadow: `2px 0 8px rgba(0,0,0,0.1)` (depth)
- Position: `fixed` (always visible)
- Z-index: `1000` (above content)

**States**:
- Expanded (default desktop)
- Collapsed (user action or <1024px screen)
- Hidden (mobile, shows on hamburger tap)

### 5.2 Tab Button

**Purpose**: Individual navigation tab selector

**Dimensions**:
- Expanded: 224px width Ã— 56px height (8px padding on sides)
- Collapsed: 44px width Ã— 56px height (icon only, centered)

**Visual Properties**:
- Font: Inter, 15px, 500 weight
- Color (inactive): `#8892a6` (muted gray)
- Color (active): `#ffffff` (white)
- Background (inactive): Transparent
- Background (active): `#2563eb` (blue)
- Background (hover): `#1e40af` (darker blue, 60% opacity)
- Border-radius: `8px`
- Padding: `12px 16px`
- Icon size: `20px Ã— 20px`
- Icon position: `16px from left, vertically centered`
- Label position: `44px from left (after icon + 8px gap)`

**States**:
- **Default (inactive)**: Gray text, no background
- **Hover**: Dim blue background (60% opacity), gray text
- **Active**: Full blue background, white text, white icon
- **Focus**: 2px blue outline, offset 2px
- **Pressed**: Slightly darker blue, scale(0.98)

**Animation**:
- Background transition: `150ms ease-in-out`
- Color transition: `150ms ease-in-out`
- Scale on press: `100ms ease-out`

### 5.3 Tab Icon

**Purpose**: Visual identifier for each tab

**Specifications**:
- **Single Options**: ğŸ” Magnifying glass (search/scan)
- **Multi-Leg**: ğŸ¯ Target/bullseye (precision strategies)
- **Stock Scans**: ğŸ“ˆ Chart with uptrend (stock analysis)
- **Portfolio**: ğŸ’¼ Briefcase (professional/business)

**Technical**:
- Type: SVG icons (not emojis - for consistency)
- Size: 20px Ã— 20px
- Color: Inherits from parent text color
- Stroke-width: 1.5px

**Alternative Icons** (if emojis render poorly):
- Single Options: Lucide `search` icon
- Multi-Leg: Lucide `target` icon
- Stock Scans: Lucide `trending-up` icon
- Portfolio: Lucide `briefcase` icon

### 5.4 Collapse/Expand Button

**Purpose**: Toggle sidebar between expanded and collapsed states

**Dimensions**:
- Size: 32px Ã— 32px (square button)
- Position: Bottom-left of sidebar, 16px from bottom and left edges

**Visual Properties**:
- Icon: `Â«` (left-pointing double chevron) when expanded
- Icon: `Â»` (right-pointing double chevron) when collapsed
- Background: `#2d3142` (matches sidebar theme)
- Background (hover): `#3d4155`
- Color: `#8892a6` (matches inactive tab text)
- Color (hover): `#ffffff`
- Border-radius: `6px`
- Border: None

**States**:
- Default: Gray icon on dark background
- Hover: White icon on slightly lighter background
- Focus: 2px blue outline
- Pressed: Scale(0.95), darker background

**Animation**:
- Rotation on toggle: Icon rotates 180Â° (300ms ease-in-out)
- Background transition: 150ms ease-in-out

### 5.5 Keyboard Shortcut Indicator

**Purpose**: Show keyboard shortcuts in tooltip or help modal

**Specifications**:
- Display: Tooltip on tab hover (after 800ms delay)
- Content: "Cmd+1" or "Ctrl+1" (platform-aware)
- Font: Inter Mono, 12px, 400 weight
- Background: `#1a1d29` with 95% opacity
- Padding: `4px 8px`
- Border-radius: `4px`
- Border: `1px solid #2d3142`
- Arrow: 6px triangle pointing to tab button

**Position**:
- Desktop: Right of tab button, 8px offset
- Mobile: Not shown (no keyboard shortcuts on mobile)

### 5.6 Mobile Hamburger Button

**Purpose**: Open sidebar drawer on mobile devices

**Dimensions**:
- Size: 44px Ã— 44px (minimum touch target)
- Position: Top-left corner, 8px from edges

**Visual Properties**:
- Icon: Three horizontal lines (â˜°)
- Background: Transparent (or `#1a1d29` if on light header)
- Icon color: `#1a1d29` (dark) or `#ffffff` (light)
- Icon size: 24px Ã— 24px

**States**:
- Default: Three lines
- Active (drawer open): âœ• (close icon)
- Hover: Slight background tint
- Press: Scale(0.9), ripple effect

**Animation**:
- Morph: Three lines â†’ âœ• (300ms ease-in-out) on tap
- Ripple: Circular ripple from tap point (200ms)

### 5.7 Mobile Overlay

**Purpose**: Dim background when sidebar drawer is open

**Specifications**:
- Background: `rgba(0, 0, 0, 0.4)` (40% black opacity)
- Z-index: `999` (below sidebar, above content)
- Tap behavior: Closes sidebar on tap anywhere

**Animation**:
- Fade in: 200ms ease-out
- Fade out: 200ms ease-in

---

## 6. Design System

### 6.1 Color Palette

**Primary Colors**:
- Blue (Active): `#2563eb` (Tailwind blue-600)
- Blue (Hover): `#1e40af` (Tailwind blue-700)
- Blue (Focus): `#3b82f6` (Tailwind blue-500)

**Neutral Colors**:
- Background Dark: `#1a1d29` (sidebar background)
- Border Gray: `#2d3142` (separators)
- Text Inactive: `#8892a6` (muted text)
- Text Active: `#ffffff` (white text)

**Status Colors** (for future use):
- Success: `#10b981` (green-500)
- Warning: `#f59e0b` (amber-500)
- Error: `#ef4444` (red-500)

### 6.2 Typography

**Font Family**:
- Primary: Inter (Google Fonts)
- Monospace: Inter Mono (for shortcuts)

**Tab Button Text**:
- Size: 15px
- Weight: 500 (medium)
- Line-height: 1.5
- Letter-spacing: -0.01em

**Sidebar Header** (if added):
- Size: 18px
- Weight: 600 (semibold)
- Color: `#ffffff`

### 6.3 Spacing

**Internal Padding**:
- Tab button: `12px 16px`
- Sidebar container: `8px` (horizontal padding for tabs)
- Tab gap: `4px` (vertical spacing between tabs)

**Margins**:
- Header to first tab: `16px`
- Last tab to collapse button: `auto` (pushes to bottom)
- Collapse button to bottom: `16px`

### 6.4 Iconography

**Icon Library**: Lucide Icons (or Heroicons)
- Consistent stroke-width: 1.5px
- Size: 20px Ã— 20px
- Style: Outline (not filled)

**Icon Usage**:
- Always pair icon + label on desktop expanded state
- Icon only on desktop collapsed state
- Icon + label on mobile

---

## 7. Interactions & Animations

### 7.1 Tab Click Interaction

**Sequence**:
1. User hovers tab button â†’ Background fades to hover color (150ms)
2. User clicks tab button â†’ Button scales to 0.98 (100ms)
3. Active state applied â†’ Background changes to blue (150ms)
4. Content area fades out (100ms opacity transition)
5. New tab content fades in (100ms opacity transition)
6. URL updates (no page reload)

**Timing**: Total 200ms perceived switching time

### 7.2 Sidebar Collapse/Expand Animation

**Collapse Sequence**:
1. User clicks collapse button â†’ Button icon rotates 180Â° (300ms)
2. Tab labels begin fade-out (200ms, starts immediately)
3. Sidebar width animates 240px â†’ 60px (300ms ease-in-out)
4. Content area width adjusts (300ms, synchronized)
5. Icons remain centered, labels hidden

**Expand Sequence**:
1. User clicks expand button â†’ Button icon rotates 180Â° (300ms)
2. Sidebar width animates 60px â†’ 240px (300ms ease-in-out)
3. Tab labels fade in (200ms, starts at 100ms into width animation)
4. Content area width adjusts (300ms, synchronized)

**Easing**: `cubic-bezier(0.4, 0.0, 0.2, 1)` (Material Design standard easing)

### 7.3 Mobile Drawer Slide Animation

**Open Sequence**:
1. User taps hamburger â†’ Icon morphs to âœ• (300ms)
2. Overlay fades in (200ms ease-out)
3. Sidebar slides in from left (300ms ease-out)
   - Transform: `translateX(-100%)` â†’ `translateX(0)`
4. Sidebar content fades in (100ms, starts at 200ms)

**Close Sequence**:
1. User taps overlay or âœ• â†’ âœ• morphs to â˜° (300ms)
2. Sidebar slides out to left (300ms ease-in)
   - Transform: `translateX(0)` â†’ `translateX(-100%)`
3. Overlay fades out (200ms ease-in)
4. Content regains focus

### 7.4 Keyboard Navigation

**Tab Switching**:
- Cmd/Ctrl + 1 â†’ Single Options (instant, no animation)
- Cmd/Ctrl + 2 â†’ Multi-Leg (instant)
- Cmd/Ctrl + 3 â†’ Stock Scans (instant)
- Cmd/Ctrl + 4 â†’ Portfolio (instant)

**Tab Order Navigation**:
- Tab key moves focus through tab buttons sequentially
- Arrow Up/Down also move focus
- Enter activates focused tab
- Escape closes mobile drawer (if open)

**Focus Behavior**:
- Focus outline: 2px solid `#3b82f6`, offset 2px outside button
- Focus never hidden (always visible for keyboard users)

### 7.5 Hover Effects

**Tab Button Hover**:
- Background color transition: 150ms ease-in-out
- Text color: No change (stays gray unless active)
- Cursor: `pointer`

**Collapse Button Hover**:
- Background lightens: `#2d3142` â†’ `#3d4155`
- Icon color: `#8892a6` â†’ `#ffffff`
- Transition: 150ms ease-in-out

---

## 8. Accessibility (WCAG 2.1 AA)

### 8.1 Semantic HTML

**Sidebar Structure**:
```html
<nav role="navigation" aria-label="Main navigation">
  <div class="sidebar-header" id="sidebar-label">
    Options Scanner
  </div>
  <div role="tablist" aria-labelledby="sidebar-label" aria-orientation="vertical">
    <button role="tab" aria-selected="true" aria-controls="panel-single" id="tab-single">
      <svg aria-hidden="true">...</svg>
      <span>Single Options</span>
    </button>
    <button role="tab" aria-selected="false" aria-controls="panel-multi" id="tab-multi">
      <svg aria-hidden="true">...</svg>
      <span>Multi-Leg</span>
    </button>
    <!-- etc. -->
  </div>
</nav>

<main role="main">
  <div role="tabpanel" id="panel-single" aria-labelledby="tab-single" tabindex="0">
    <!-- Single Options content -->
  </div>
  <!-- Other panels hidden -->
</main>
```

### 8.2 ARIA Attributes

**Tab Buttons**:
- `role="tab"` on each button
- `aria-selected="true"` on active tab, `"false"` on others
- `aria-controls` pointing to corresponding panel ID
- `aria-label` for screen readers: "Navigate to Single Options tab"

**Tab Panels**:
- `role="tabpanel"` on content container
- `aria-labelledby` pointing to corresponding tab ID
- `tabindex="0"` for keyboard focus
- `hidden` attribute on inactive panels (not just CSS display:none)

**Collapse Button**:
- `aria-label="Collapse sidebar"` (changes to "Expand sidebar" when collapsed)
- `aria-expanded="true"` or `"false"` to indicate state

**Mobile Hamburger**:
- `aria-label="Open navigation menu"` (changes to "Close navigation menu" when open)
- `aria-expanded="false"` or `"true"`

### 8.3 Keyboard Navigation

**Shortcuts**:
- `Cmd+1` / `Ctrl+1`: Jump to Single Options tab
- `Cmd+2` / `Ctrl+2`: Jump to Multi-Leg tab
- `Cmd+3` / `Ctrl+3`: Jump to Stock Scans tab
- `Cmd+4` / `Ctrl+4`: Jump to Portfolio tab
- `Tab`: Move focus through interactive elements
- `Arrow Up/Down`: Navigate between tab buttons
- `Enter` / `Space`: Activate focused tab
- `Escape`: Close mobile drawer (if open)

**Focus Management**:
- Focus visible at all times (2px blue outline)
- Focus moves to tab content after tab activation
- Focus trapped in mobile drawer when open
- Focus returns to hamburger button when drawer closes

### 8.4 Screen Reader Support

**Announcements**:
- Tab activation: "Single Options tab, 1 of 4, selected"
- Sidebar collapse: "Sidebar collapsed, only icons visible"
- Sidebar expand: "Sidebar expanded, labels visible"
- Mobile drawer open: "Navigation menu open"
- Mobile drawer close: "Navigation menu closed"

**Live Regions**:
- Use `aria-live="polite"` for status announcements
- Use `aria-atomic="true"` to read entire message

### 8.5 Color Contrast

**Text Contrast** (WCAG AA requires 4.5:1 for normal text):
- Inactive tab text (`#8892a6`) on sidebar background (`#1a1d29`): **5.2:1** âœ…
- Active tab text (`#ffffff`) on active background (`#2563eb`): **8.6:1** âœ…
- Hover state text (`#8892a6`) on hover background (`#1e40af`): **4.8:1** âœ…

**Icon Contrast**:
- Icons inherit text color, so same contrast ratios as text
- All pass WCAG AA âœ…

### 8.6 Focus Indicators

**Visible Focus**:
- 2px solid blue (`#3b82f6`) outline
- 2px offset from element (not cropped by overflow)
- Never hidden or removed
- High contrast against all backgrounds

### 8.7 Touch Targets (Mobile)

**Minimum Size**: 44px Ã— 44px (WCAG 2.1 AA guideline)
- Tab buttons on mobile: 48px Ã— 56px âœ…
- Hamburger button: 44px Ã— 44px âœ…
- Close button on mobile drawer: 44px Ã— 44px âœ…

### 8.8 Motion & Animation

**Respect User Preferences**:
```css
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
```

**Effect**: Users with `prefers-reduced-motion` set see instant transitions (no animations)

---

## 9. Responsive Design

### 9.1 Breakpoints

| Breakpoint | Width | Sidebar State | Layout |
|------------|-------|---------------|--------|
| Desktop XL | â‰¥1920px | Expanded (240px) | Sidebar + Content |
| Desktop L | â‰¥1440px | Expanded (240px) | Sidebar + Content |
| Desktop M | â‰¥1024px | Collapsible (240px default) | Sidebar + Content |
| Tablet | 768px - 1023px | Hidden (hamburger menu) | Full-width content |
| Mobile L | 375px - 767px | Hidden (hamburger menu) | Full-width content |
| Mobile S | <375px | Hidden (hamburger menu) | Full-width content |

### 9.2 Desktop Responsive Behavior

**â‰¥1024px** (Standard Desktop):
- Sidebar starts expanded (240px)
- User can collapse to 60px via button
- Content area adjusts width: `calc(100vw - 240px)` or `calc(100vw - 60px)`
- Collapse state persists in localStorage

**1024px - 1365px** (Small Desktop):
- Sidebar starts collapsed (60px) to give more content space
- User can expand to 240px
- Labels hidden by default, tooltips show on hover

### 9.3 Tablet Responsive Behavior

**768px - 1023px**:
- Sidebar hidden (display: none)
- Hamburger menu visible in top-left
- Tap hamburger â†’ Full-width drawer slides in from left
- Drawer covers content (not side-by-side)
- Backdrop overlay dims content
- Tap outside drawer or close button â†’ Drawer slides out

### 9.4 Mobile Responsive Behavior

**< 768px**:
- Same as tablet: Hamburger menu + full-width drawer
- Drawer width: 80% of screen width (max 300px)
- Tab buttons stack vertically with more vertical padding (16px top/bottom)
- Larger touch targets: 48px height minimum
- Swipe gesture to close drawer (optional enhancement)

### 9.5 Orientation Changes

**Portrait â†’ Landscape**:
- Tablet/Mobile: Drawer width adjusts to maintain proportions
- Desktop: No change (sidebar remains visible)

**Landscape â†’ Portrait**:
- Tablet/Mobile: Drawer width adjusts
- If drawer was open, it remains open (user intent preserved)

---

## 10. Interactive Prototypes

### 10.1 HTML/CSS Prototype **(MANDATORY)**

**Location**: [docs/ux/prototypes/vertical-nav-sidebar/index.html](../prototypes/vertical-nav-sidebar/index.html)

**Scope**:
- âœ… Fully functional sidebar with 4 tabs
- âœ… Click to switch tabs (content changes)
- âœ… Collapse/expand button working
- âœ… Hover and active states
- âœ… Keyboard shortcuts (Cmd/Ctrl + 1-4)
- âœ… Responsive: Desktop expanded, desktop collapsed, mobile drawer
- âœ… All animations and transitions
- âš ï¸ Content panels show placeholder content (not full application)

**Technologies**:
- Pure HTML5 + CSS3 (no frameworks)
- Vanilla JavaScript for interactions
- CSS Grid for layout
- CSS Custom Properties for theming

### 10.2 Figma Prototype (Optional)

**Status**: Not created (HTML prototype sufficient for this feature)

**Note**: For more complex UI features (e.g., Strategy Builder with drag-and-drop), Figma prototypes may be valuable. For navigation components, production-ready HTML/CSS is more useful for engineers.

### 10.3 Interactive Demo (Deployed)

**Status**: Not deployed

**Future**: Could deploy HTML prototype to Vercel/Netlify for stakeholder review if needed.

---

## 11. Implementation Notes

### 11.1 For Engineers

**Existing Components to Reuse**:
- None (this is a new layout component)

**New Components to Create**:
- `Sidebar.tsx` in `app/components/layout/Sidebar.tsx`
- `TabButton.tsx` in `app/components/layout/TabButton.tsx`
- `MobileNav.tsx` in `app/components/layout/MobileNav.tsx` (optional, can inline in Sidebar)

**CSS/Styling Approach**:
- CSS Modules: `app/styles/sidebar.module.css`
- Tailwind classes: For utility styles (flexbox, spacing)
- CSS custom properties: For theming (sidebar background, active color, etc.)

**State Management**:
- Use React Context or URL state for active tab
- Collapsed state: localStorage (`sidebar-collapsed: 'true' | 'false'`)
- Mobile drawer open: Component state (not persisted)

### 11.2 Component API

**Sidebar Component**:
```tsx
<Sidebar
  activeTab="single-options" // "single-options" | "multi-leg" | "stock-scans" | "portfolio"
  onTabChange={(tabId) => void}
  defaultCollapsed={false}
  showKeyboardShortcuts={true}
/>
```

**TabButton Component**:
```tsx
<TabButton
  id="single-options"
  label="Single Options"
  icon={<SearchIcon />}
  active={false}
  collapsed={false}
  keyboardShortcut="1"
  onClick={() => void}
/>
```

### 11.3 Routing Integration

**Next.js App Router**:
- `/scans/single` â†’ Renders Sidebar with "single-options" active, shows ScannerSection
- `/scans/multi` â†’ Sidebar with "multi-leg" active, shows StrategyBuilderSection
- `/scans/stock` â†’ Sidebar with "stock-scans" active, shows StockScanSection (new)
- `/portfolio` â†’ Sidebar with "portfolio" active, shows PortfolioRiskSection

**URL Sync**:
- Use `useRouter()` from Next.js
- On tab click: `router.push('/scans/single')` (shallow route, no scroll)
- On mount: Read `router.pathname` to set active tab

### 11.4 localStorage Keys

- `sidebar-collapsed`: `'true'` or `'false'` (desktop collapse state)
- `last-active-tab`: `'single-options'` | `'multi-leg'` | `'stock-scans'` | `'portfolio'` (restore on reload)

### 11.5 Performance Considerations

**Lazy Load Tab Content**:
- Use `React.lazy()` and `<Suspense>` for each tab panel
- Only render active tab content, unmount others
- Preload next likely tab (e.g., if on Single Options, preload Multi-Leg)

**Animation Performance**:
- Use `transform` and `opacity` for animations (GPU-accelerated)
- Avoid animating `width`, `height`, `left`, `right` (causes reflow)
- Use `will-change: transform` on animated elements (sparingly)

**Bundle Size**:
- Lucide icons tree-shakeable (import only needed icons)
- Sidebar.tsx ~5KB gzipped (estimated)

---

## 12. Open Questions

### 12.1 Design Questions

1. **Should sidebar auto-collapse on screens 1024px-1365px?**
   - **Status**: Open for discussion
   - **Proposed**: Yes, auto-collapse on <1366px, remember user's manual choice

2. **Should keyboard shortcuts be shown in the UI permanently?**
   - **Status**: Open
   - **Proposed**: Show in tooltip on hover (not permanent badge) to reduce visual clutter

3. **Should mobile drawer support swipe gestures to open/close?**
   - **Status**: Nice-to-have
   - **Proposed**: Phase 2 enhancement (not critical for MVP)

### 12.2 Technical Questions

1. **Should sidebar state sync across browser tabs?**
   - **Status**: Open
   - **Proposed**: No (too complex for benefit), each tab independent

2. **Should we support custom tab order via drag-and-drop?**
   - **Status**: Out of scope for v1
   - **Proposed**: Future enhancement (in user settings)

---

## 13. References

### 13.1 Internal Documents

- **Epic #9**: https://github.com/mkspwr12/options-scanner-frontend/issues/9
- **Feature #10**: https://github.com/mkspwr12/options-scanner-frontend/issues/10
- **AGENTS.md**: [AGENTS.md](../../AGENTS.md) - AgentX workflow guidelines

### 13.2 External References

- **WCAG 2.1 Guidelines**: https://www.w3.org/WAI/WCAG21/quickref/
- **ARIA Authoring Practices - Tabs**: https://www.w3.org/WAI/ARIA/apg/patterns/tabs/
- **Material Design Navigation Drawer**: https://m3.material.io/components/navigation-drawer
- **Tailwind CSS Colors**: https://tailwindcss.com/docs/customizing-colors
- **Lucide Icons**: https://lucide.dev/icons/

### 13.3 Competitive Examples

- **Thinkorswim**: TD Ameritrade trading platform (left sidebar with tabs)
- **Interactive Brokers TWS**: Professional trading workstation (customizable panels)
- **TradingView**: Web-based charting platform (bottom tab bar on mobile)

---

## Approval & Sign-Off

**Status**: âœ… Ready for Review

**Next Steps**:
1. Engineer: Review UX design and HTML prototype
2. Architect: Create ADR for layout architecture (routing, state management)
3. PM: Approve design aligns with PRD requirements
4. Implement: Begin Sprint 1.1 (Foundation - Layout Infrastructure)

**Estimated Engineering Effort**: 3-5 days
- Day 1: Sidebar.tsx component + basic styling
- Day 2: Tab switching logic + URL routing
- Day 3: Collapse/expand functionality + animations
- Day 4: Mobile responsive (hamburger menu + drawer)
- Day 5: Accessibility audit + keyboard shortcuts

---

**Design Version**: 1.0  
**Last Updated**: 2026-02-16  
**Designer**: UX Designer Agent
