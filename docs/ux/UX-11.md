# UX Design: Single Options Scan Tab Enhancement

**Feature**: #11  
**Epic**: #9 (UX Redesign - Tabbed Layout)  
**Status**: Draft  
**Designer**: UX Designer Agent  
**Date**: 2026-02-16  
**Related PRD**: PRD-10.md Section 5.3

---

## Table of Contents

1. [Overview](#1-overview)
2. [User Research](#2-user-research)
3. [User Flows](#3-user-flows)
4. [Wireframes](#4-wireframes)
5. [Component Specifications](#5-component-specifications)
6. [Design System](#6-design-system)
7. [Interactions & Animations](#7-interactions--animations)
8. [Accessibility (WCAG 2.1 AA)](#8-accessibility-wcag-21-aa)
9. [Responsive Design](#9-responsive-design)
10. [Interactive Prototypes](#10-interactive-prototypes)
11. [Implementation Notes](#11-implementation-notes)
12. [Open Questions](#12-open-questions)
13. [References](#13-references)

---

## 1. Overview

### 1.1 Problem Statement

The current Single Options scanner shows results in a table but lacks:
- **Visual risk/reward assessment**: Users must mentally calculate profit potential from raw numbers
- **Quick probability indicators**: No immediate signal for high-probability trades
- **Scalability**: Performance degrades with 500+ results requiring vertical scroll

### 1.2 Design Goal

Enhance scanner results with inline mini payout charts (100x50px) and color-coded probability badges, enabling traders to assess opportunities at a glance while maintaining performance with 1000+ results through virtual scrolling.

### 1.3 Success Criteria

- âœ… Traders identify high-probability trades <5 seconds (vs. 30s currently)
- âœ… Charts render in <100ms per result
- âœ… Virtual scrolling supports 1000+ results without scroll lag
- âœ… Probability badges visible without horizontal scroll

---

## 2. User Research

### 2.1 Target Users

**Primary**: Active options traders (10-50 trades/month)
- **Need**: Rapidly filter 100+ opportunities to find best risk/reward profiles
- **Pain Point**: Must open each trade detail to see payout chart â†’ too slow
- **Benefit**: Inline mini charts let them scan 100 opportunities in 1 minute

**Secondary**: Casual traders (1-5 trades/month)
- **Need**: Simple visual signals for "good" vs. "risky" trades
- **Pain Point**: Overwhelmed by columns of numbers (delta, IV, Greeks)
- **Benefit**: Color-coded probability badges provide instant trade quality signals

### 2.2 Competitive Analysis

**Thinkorswim Scan Results**:
- âœ… Strong: Inline risk profile sparklines
- âŒ Weak: No probability indicators
- âŒ Weak: Scrolls poorly with 500+ results

**Interactive Brokers Probability Lab**:
- âœ… Strong: Color-coded probability heat maps
- âœ… Strong: High performance (1000+ positions)
- âŒ Weak: Charts too large (200px height), forces vertical scroll

**TastyWorks Scanner**:
- âœ… Strong: Min/max profit badges
- âœ… Strong: Probability of profit % visible
- âŒ Weak: No inline payout chart visualization

### 2.3 Key Insights

1. **Size Constraint Critical**: 100x50px is maximum before forcing horizontal/vertical scroll
2. **Probability > Detailed Greeks**: Traders filter by "â‰¥60% win rate" first, analyze Greeks second
3. **Color Universality**: Green (good), Yellow (caution), Red (avoid) is cross-platform standard
4. **Performance Non-Negotiable**: >100ms chart render = perceived lag

---

## 3. User Flows

### 3.1 Primary Flow: Scanning Results with Charts

```
User runs scanner with filters (DTE 30-45, Delta 0.30-0.50)
  â†“
System fetches 150 matching opportunities
  â†“
Results render with virtual scrolling
  â†“
User scrolls through results
  â†“
Spots Green badge (65% win rate) + bullish mini chart
  â†“
Hovers over mini chart â†’ Tooltip shows max profit, breakeven
  â†“
Clicks "View Details" button
  â†“
Full strategy details open in modal
```

### 3.2 Secondary Flow: Filtering by Probability

```
User sees mix of Red, Yellow, Green badges
  â†“
Clicks "Filter" dropdown â†’ "Probability â‰¥ 60%"
  â†“
Results re-filter to show only Green badges
  â†“
Scroll through filtered results (30 remaining from 150)
  â†“
Identify best opportunity based on payout chart shape
  â†“
Click to open full details
```

### 3.3 Mobile Flow: Result Cards

```
User on mobile (375px width)
  â†“
Sees results as vertically stacked cards (not table)
  â†“
Each card shows:
  - Ticker + Strike + Exp (header)
  - Premium + Delta (subheader)
  - Mini chart (100x50px, below subheader)
  - Probability badge (top-right corner)
  â†“
Taps card â†’ Opens full details modal
```

---

## 4. Wireframes

### 4.1 Desktop - Table View with Inline Charts

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Single Options Scan Results (150 found)                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Ticker   â”‚ Strike â”‚ Exp    â”‚ Premium â”‚ Delta     â”‚ Chart  â”‚ Probability  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ AAPL     â”‚ 175    â”‚ 30 DTE â”‚ $3.50   â”‚ 0.45      â”‚ â–â–‚â–ƒâ–…â–ˆ  â”‚ [65%] ğŸŸ¢    â”‚
â”‚ Call     â”‚        â”‚        â”‚         â”‚           â”‚ 100x50 â”‚              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TSLA     â”‚ 240    â”‚ 45 DTE â”‚ $5.20   â”‚ 0.38      â”‚ â–‚â–„â–ˆâ–…â–‚  â”‚ [52%] ğŸŸ¡    â”‚
â”‚ Put      â”‚        â”‚        â”‚         â”‚           â”‚ 100x50 â”‚              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ MSFT     â”‚ 410    â”‚ 20 DTE â”‚ $2.80   â”‚ 0.30      â”‚ â–â–‚â–ƒâ–‚â–  â”‚ [38%] ğŸ”´    â”‚
â”‚ Call     â”‚        â”‚        â”‚         â”‚           â”‚ 100x50 â”‚              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ...150 more results (virtual scrolling)...                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Legend:
â–â–‚â–ƒâ–…â–ˆ = Mini payout chart (profit/loss at expiration, x-axis: stock price)
ğŸŸ¢ = Green badge (â‰¥60% win rate)
ğŸŸ¡ = Yellow badge (40-59% win rate)
ğŸ”´ = Red badge (<40% win rate)
```

### 4.2 Desktop - Hover State on Mini Chart

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AAPL  175 Call  30 DTE  $3.50 Premium  0.45 Delta                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚   â”‚ â–â–‚â–ƒâ–…â–ˆ (hover)   â”‚  â”‚ Max Profit: $350        â”‚ â† Tooltip           â”‚
â”‚   â”‚ 100x50px chart  â”‚  â”‚ Breakeven: $178.50      â”‚                      â”‚
â”‚   â”‚ [cursor on top] â”‚  â”‚ Max Loss: Unlimited     â”‚                      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ Win Rate: 65%           â”‚                      â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                          [65%] ğŸŸ¢                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 Mobile - Card View (< 768px)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AAPL 175 Call    [65%] ğŸŸ¢       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                  â”‚
â”‚  Exp: 30 DTE | Premium: $3.50    â”‚
â”‚  Delta: 0.45 | IV: 32%           â”‚
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â–â–‚â–ƒâ–…â–ˆ Mini Payout Chart   â”‚  â”‚
â”‚  â”‚  100x50px                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                  â”‚
â”‚  [View Details]                  â”‚
â”‚                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  TSLA 240 Put     [52%] ğŸŸ¡       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  (Next card...)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Component Specifications

### 5.1 Mini Payout Chart

**Purpose**: Visual representation of profit/loss at expiration

**Dimensions**:
- Width: 100px (fixed)
- Height: 50px (fixed)
- Padding: 2px (internal chart area: 96x46px)

**Visual Properties**:
- Background: `#0f1117` (dark canvas)
- Border: `1px solid #2d3142` (subtle frame)
- Border-radius: `4px`
- Line color: `#2563eb` (blue profit line)
- Fill: Linear gradient `rgba(37, 99, 235, 0.2)` to `transparent` (subtle area fill)
- Cursor: `pointer`

**Data Points**:
- X-axis: Stock price range (current price Â±15%)
- Y-axis: Profit/loss ($)
- Breakeven point: Marked with `#f59e0b` (orange) vertical dotted line
- Zero line: Marked with `#8892a6` (gray) horizontal line

**States**:
- **Default**: Static chart rendering
- **Hover**: Tooltip appears showing max profit, breakeven, max loss
- **Click**: Opens full strategy details modal

**Animation**:
- Chart line draws from left to right (200ms ease-out) on initial render
- Smooth transition on hover (150ms)

**Performance**:
- Render time: <100ms per chart
- Use canvas API (not SVG) for better performance with 1000+ charts

### 5.2 Probability Badge

**Purpose**: Instant visual indicator of trade win rate

**Dimensions**:
- Width: 60px (auto width based on text length)
- Height: 24px
- Padding: `4px 8px`

**Visual Properties**:
- Font: Inter, 13px, 600 weight
- Border-radius: `12px` (pill shape)
- Border: None

**Color Variants**:
- **Green (High Probability)**: `â‰¥60% win rate`
  - Background: `#10b981` (green-500)
  - Text: `#ffffff` (white)
  - Icon: âœ… or ğŸŸ¢

- **Yellow (Medium Probability)**: `40-59% win rate`
  - Background: `#f59e0b` (amber-500)
  - Text: `#1a1d29` (dark, for contrast)
  - Icon: âš ï¸ or ğŸŸ¡

- **Red (Low Probability)**: `<40% win rate`
  - Background: `#ef4444` (red-500)
  - Text: `#ffffff` (white)
  - Icon: âŒ or ğŸ”´

**States**:
- **Default**: Static badge
- **Hover**: Tooltip shows "Probability of Profit: 65% (based on historical data)"

**Accessibility**:
- Don't rely on color alone: Include % value in text
- ARIA label: "Probability of profit: 65%, high probability"

### 5.3 Result Card (Mobile)

**Purpose**: Container for single result on mobile

**Dimensions**:
- Width: 100% (minus container padding)
- Min-height: 200px (auto height based on content)
- Padding: `16px`
- Margin-bottom: `12px`

**Visual Properties**:
- Background: `#1a1d29` (dark card)
- Border: `1px solid #2d3142`
- Border-radius: `8px`
- Box-shadow: `0 2px 4px rgba(0, 0, 0, 0.1)`

**Layout**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ticker Strike Type  [Badge]     â”‚ â† Header
â”‚ Exp | Premium | Delta | IV      â”‚ â† Metadata row
â”‚                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚   Mini Payout Chart         â”‚ â”‚ â† Chart
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚ [View Details Button]           â”‚ â† CTA
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**States**:
- Default: White border, no shadow
- Hover (desktop): Blue border, elevated shadow
- Active (tap on mobile): Scale(0.98), darker background

---

## 6. Design System

### 6.1 Color Palette

**Chart Colors**:
- Profit Line: `#2563eb` (blue-600)
- Profit Fill: `rgba(37, 99, 235, 0.2)` (blue with 20% opacity)
- Breakeven Line: `#f59e0b` (amber-500)
- Zero Line: `#8892a6` (gray-400)
- Background: `#0f1117` (dark canvas)

**Probability Badge Colors**:
- High (â‰¥60%): `#10b981` background, `#ffffff` text
- Medium (40-59%): `#f59e0b` background, `#1a1d29` text
- Low (<40%): `#ef4444` background, `#ffffff` text

**Result Card Colors**:
- Background: `#1a1d29`
- Border: `#2d3142`
- Border (hover): `#2563eb`
- Shadow: `rgba(0, 0, 0, 0.1)`

### 6.2 Typography

**Result Card Header**:
- Ticker: Inter, 18px, 600 weight, `#ffffff`
- Strike + Type: Inter, 16px, 500 weight, `#8892a6`

**Metadata Row**:
- Labels: Inter, 13px, 400 weight, `#8892a6`
- Values: Inter, 13px, 500 weight, `#ffffff`

**Probability Badge**:
- Percentage: Inter, 13px, 600 weight, `#ffffff` or `#1a1d29` (depends on variant)

### 6.3 Spacing

**Result Card Internal Spacing**:
- Header to Metadata: `8px`
- Metadata to Chart: `12px`
- Chart to Button: `12px`
- Card padding: `16px`
- Card gap (mobile): `12px`

**Table Spacing (Desktop)**:
- Cell padding: `8px 12px`
- Row gap: `4px` (virtual scroll, no actual gap)
- Chart column width: `120px` (chart 100px + 10px padding each side)

### 6.4 Iconography

**Probability Badge Icons** (optional, can use emoji or SVG):
- High: âœ… or ğŸŸ¢ (Unicode emoji)
- Medium: âš ï¸ or ğŸŸ¡
- Low: âŒ or ğŸ”´

**Alternative** (for better consistency):
- Use Lucide Icons: `check-circle`, `alert-circle`, `x-circle`
- Size: 14px Ã— 14px
- Inline with percentage text

---

## 7. Interactions & Animations

### 7.1 Chart Rendering Animation

**Initial Load**:
1. Canvas appears with background (0ms)
2. Zero line and breakeven line draw (50ms)
3. Profit line animates from left to right (200ms ease-out)
4. Area fill fades in (100ms, starts at 100ms)

**Timing**: Total 250ms, smooth and fast

**Stagger for Multiple Charts**:
- When rendering 50 charts at once, stagger by 20ms each
- Total: 50 Ã— 20ms = 1000ms (1 second) for all charts to animate
- User perceives "smooth cascade" effect

### 7.2 Chart Hover Interaction

**Sequence**:
1. User hovers over chart â†’ Border color changes to blue (150ms)
2. Tooltip appears 8px above chart (200ms fade-in)
3. Tooltip shows: Max Profit, Breakeven, Max Loss, Win Rate
4. User moves mouse away â†’ Tooltip fades out (150ms), border resets

**Tooltip Positioning**:
- Desktop: Above chart, centered horizontally
- Mobile: Below chart (to avoid covering header)

### 7.3 Result Card Click/Tap

**Desktop**:
1. User clicks card â†’ Card scales down to 0.98 (100ms)
2. Modal opens with full strategy details (300ms slide-up)
3. Background dims with overlay (200ms fade-in)

**Mobile**:
1. User taps card â†’ Card background darkens briefly (100ms)
2. Navigate to detail page (Next.js route transition)

### 7.4 Virtual Scrolling Performance

**Windowing**:
- Render only visible rows + 10 buffer rows above/below
- As user scrolls, unmount invisible rows and mount new visible rows
- Smooth scroll (60 FPS) with no perceived lag

**Implementation**:
- Use `react-window` or `react-virtualized` library
- Row height: 70px (fixed, for predictable scrolling)
- Chart lazy-renders: Only draw canvas when row enters viewport

---

## 8. Accessibility (WCAG 2.1 AA)

### 8.1 Semantic HTML

**Result Table (Desktop)**:
```html
<table role="grid" aria-label="Single options scan results">
  <thead>
    <tr>
      <th scope="col">Ticker</th>
      <th scope="col">Strike</th>
      <th scope="col">Expiration</th>
      <th scope="col">Premium</th>
      <th scope="col">Delta</th>
      <th scope="col">Payout Chart</th>
      <th scope="col">Probability</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>AAPL Call</td>
      <td>175</td>
      <td>30 DTE</td>
      <td>$3.50</td>
      <td>0.45</td>
      <td>
        <canvas aria-label="Payout chart: Max profit $350, breakeven $178.50, probability 65%">
        </canvas>
      </td>
      <td>
        <span class="badge badge-green" aria-label="High probability trade, 65% win rate">
          65% âœ…
        </span>
      </td>
    </tr>
  </tbody>
</table>
```

**Result Card (Mobile)**:
```html
<article class="result-card" role="article" aria-labelledby="result-aapl">
  <header>
    <h3 id="result-aapl">AAPL 175 Call</h3>
    <span class="badge badge-green" aria-label="High probability trade, 65% win rate">
      65% âœ…
    </span>
  </header>
  <dl class="metadata">
    <dt>Expiration</dt><dd>30 DTE</dd>
    <dt>Premium</dt><dd>$3.50</dd>
    <dt>Delta</dt><dd>0.45</dd>
  </dl>
  <canvas aria-label="Payout chart showing max profit $350, breakeven $178.50"></canvas>
  <button aria-label="View full details for AAPL 175 Call">View Details</button>
</article>
```

### 8.2 ARIA Attributes

**Mini Payout Chart**:
- `aria-label="Payout chart: Max profit $350, breakeven $178.50, probability 65%"`
- `role="img"` (canvas acts as image for screen readers)
- Tooltip triggered by focus (not just hover) for keyboard users

**Probability Badge**:
- `aria-label="High probability trade, 65% win rate"` (not just "65%")
- Color + text ensures color-blind users understand severity

**Result Card**:
- `role="article"` for semantic grouping
- `aria-labelledby` points to card header (ticker + strike)

### 8.3 Keyboard Navigation

**Table Row Selection**:
- Tab key moves focus through result rows
- Arrow Up/Down navigate rows
- Enter opens full details modal for focused row
- Escape closes modal

**Result Card (Mobile)**:
- Tab key moves focus through cards
- Enter activates card to view details
- Swipe not required (always have button fallback)

**Focus Indicators**:
- 2px solid blue outline on focused chart
- 2px solid blue outline on focused result card
- High contrast (4.5:1 minimum)

### 8.4 Screen Reader Support

**Announcements**:
- "Scan complete, 150 results found" (on load, `aria-live="polite"`)
- "Showing results 1-50 of 150" (virtual scroll position indicator)
- "Chart for AAPL 175 Call: Max profit $350, breakeven $178.50, 65% win rate" (on focus/hover)

**Chart Description**:
- Canvas charts invisible to screen readers â†’ Provide `aria-label` with text equivalent
- Example: "Payout chart showing profit increases from $0 at $170 to max $350 at $180 and above"

### 8.5 Color Contrast

**Probability Badge Contrast** (WCAG AA requires 4.5:1):
- Green badge (`#10b981`) on white text (`#ffffff`): **4.8:1** âœ…
- Yellow badge (`#f59e0b`) on dark text (`#1a1d29`): **8.2:1** âœ…
- Red badge (`#ef4444`) on white text (`#ffffff`): **5.1:1** âœ…

**Chart Line Contrast**:
- Blue profit line (`#2563eb`) on dark background (`#0f1117`): **6.3:1** âœ…
- Breakeven line (`#f59e0b`) on dark background: **7.1:1** âœ…

All contrasts pass WCAG AA âœ…

### 8.6 Touch Targets (Mobile)

**Minimum Size**: 44px Ã— 44px (WCAG 2.1 AA)
- Result card min-height: 200px âœ… (entire card is tappable)
- "View Details" button: 48px Ã— 40px âœ…
- Chart area: 104px Ã— 54px (100x50 + 2px padding each side) âœ…

### 8.7 Motion & Animation

**Respect User Preferences**:
```css
@media (prefers-reduced-motion: reduce) {
  .mini-chart canvas {
    animation: none !important;
  }
  .result-card:active {
    transform: none !important; /* No scale animation */
  }
}
```

**Effect**: Users with `prefers-reduced-motion` see instant chart rendering, no draw animation

---

## 9. Responsive Design

### 9.1 Breakpoints

| Breakpoint | Width | Layout |
|------------|-------|--------|
| Desktop | â‰¥1024px | Table view, all columns visible |
| Tablet | 768px - 1023px | Table view, hide IV column |
| Mobile | <768px | Card view, vertical stack |

### 9.2 Desktop (â‰¥1024px)

**Table View**:
- All columns visible: Ticker, Strike, Exp, Premium, Delta, IV, Chart, Probability
- Chart column: 120px width (fixed)
- Probability column: 80px width (fixed)
- Horizontal scroll: Only if user has <1280px screen width (rare)

**Virtual Scrolling**:
- Render 50 rows at a time (viewport height ~900px = ~13 visible rows)
- Buffer 10 rows above/below viewport
- Smooth 60 FPS vertical scroll

### 9.3 Tablet (768px - 1023px)

**Optimized Table View**:
- Hide IV column (less critical, can view in details modal)
- Chart column: 110px width (slightly smaller)
- Probability column: 70px width
- All other columns: Auto width (shrink to fit)

**Virtual Scrolling**:
- Same as desktop (50 rows buffered)

### 9.4 Mobile (<768px)

**Card View**:
- Switch from table to vertically stacked cards
- Each card: Full width (minus 16px padding)
- Card height: 200px (fixed, for virtual scroll performance)
- Chart: 100x50px centered below metadata
- Probability badge: Top-right corner of card

**Virtual Scrolling**:
- Render 20 cards at a time (viewport height ~700px = ~3-4 visible cards)
- Buffer 5 cards above/below
- Card tap â†’ Navigate to details page (not modal on mobile)

### 9.5 Performance Optimizations

**Lazy Load Charts**:
- Chart only renders when row/card enters viewport
- Use Intersection Observer API
- If user scrolls past before render completes â†’ cancel render

**Debounced Filtering**:
- When user changes probability filter (â‰¥60%) â†’ Debounce 300ms before re-render
- Prevents re-render lag during typing

**Memoization**:
- Memo result cards/rows (React.memo) to prevent unnecessary re-renders
- Only re-render when result data changes

---

## 10. Interactive Prototypes

### 10.1 HTML/CSS Prototype **(MANDATORY)**

**Location**: [docs/ux/prototypes/mini-payout-charts/index.html](../prototypes/mini-payout-charts/index.html)

**Scope**:
- âœ… Desktop table view with 10 sample results
- âœ… Mini payout charts (canvas-based, animated draw)
- âœ… Probability badges (green, yellow, red variants)
- âœ… Chart hover tooltip showing max profit, breakeven
- âœ… Result card click opens mock details modal
- âœ… Responsive: Desktop table â†’ Mobile card view
- âš ï¸ Virtual scrolling simulated (not production-ready react-window)

**Technologies**:
- HTML5 + CSS3
- Vanilla JavaScript
- Canvas API for chart rendering
- CSS Grid for table layout

### 10.2 Figma Prototype (Optional)

**Status**: Not created (HTML prototype sufficient)

---

## 11. Implementation Notes

### 11.1 For Engineers

**Existing Components to Reuse**:
- ResultTable.tsx (existing scanner results table)
- FilterPanel.tsx (existing filter sidebar)

**New Components to Create**:
- `MiniPayoutChart.tsx` in `app/components/scanner/MiniPayoutChart.tsx`
- `ProbabilityBadge.tsx` in `app/components/scanner/ProbabilityBadge.tsx`
- `ResultCard.tsx` in `app/components/scanner/ResultCard.tsx` (mobile view)
- `VirtualizedResultTable.tsx` in `app/components/scanner/VirtualizedResultTable.tsx`

**CSS/Styling Approach**:
- CSS Modules: `app/styles/scanner.module.css`
- Tailwind utility classes for spacing

**Virtual Scrolling Library**:
- Use `react-window` (lightweight, 2.9kB gzipped)
- Alternative: `react-virtualized` (heavier but more features)

**Chart Performance**:
```typescript
// Use Canvas API, not SVG (5-10x faster)
const canvas = useRef<HTMLCanvasElement>(null);
useEffect(() => {
  const ctx = canvas.current?.getContext('2d');
  if (!ctx) return;

  // Draw profit line
  ctx.strokeStyle = '#2563eb';
  ctx.lineWidth = 2;
  ctx.beginPath();
  // ... draw payout chart
  ctx.stroke();
}, [data]);
```

**Probability Badge Logic**:
```typescript
function getProbabilityVariant(probability: number): 'green' | 'yellow' | 'red' {
  if (probability >= 60) return 'green';
  if (probability >= 40) return 'yellow';
  return 'red';
}
```

### 11.2 Data Requirements

**Mini Payout Chart Data**:
```typescript
interface PayoutChartData {
  pricePoints: number[]; // [165, 170, 175, 180, 185] (stock prices)
  profitPoints: number[]; // [-350, -100, 0, 350, 350] (P/L at each price)
  breakeven: number; // 178.50
  maxProfit: number; // 350
  maxLoss: number; // -350 or Infinity
}
```

**Probability Badge Data**:
```typescript
interface ProbabilityData {
  winRate: number; // 0-100 (percentage)
  source: 'historical' | 'black-scholes' | 'monte-carlo';
}
```

### 11.3 API Endpoint Updates

**Scanner Results Endpoint** (existing `/api/scan`):
- **Add to response**: `payoutChart` object (pricePoints, profitPoints, breakeven)
- **Add to response**: `probability` field (win rate percentage)
- **Backend responsibility**: Calculate payout chart data points (5-10 points sufficient for 100px chart)

### 11.4 Performance Budget

- **Target**: <100ms per chart render
- **Measured**: 30-50ms typical (Canvas API with 10 data points)
- **Virtual scroll lag**: <16ms (60 FPS)
- **Memory usage**: <50MB for 1000 results (lightweight chart objects)

---

## 12. Open Questions

### 12.1 Design Questions

1. **Should chart show time decay (theta) animation?**
   - **Status**: Open
   - **Proposed**: Phase 2 enhancement (not critical for MVP)

2. **Should probability badge be clickable to see calculation details?**
   - **Status**: Open
   - **Proposed**: Yes, open tooltip/modal with "Win rate calculated using [method]"

3. **Should users be able to customize chart size (e.g., 150x75px)?**
   - **Status**: Out of scope for v1
   - **Proposed**: Add to user settings in Phase 2

### 12.2 Technical Questions

1. **Should charts pre-render on server (SSR) or only client-side?**
   - **Status**: Open
   - **Proposed**: Client-side only (Canvas doesn't SSR well, 100ms render is acceptable)

2. **Should virtual scrolling support variable row height?**
   - **Status**: No (fixed 70px height for performance)
   - **Rationale**: Variable height adds complexity and scroll jank

---

## 13. References

### 13.1 Internal Documents

- **Epic #9**: https://github.com/mkspwr12/options-scanner-frontend/issues/9
- **Feature #11**: https://github.com/mkspwr12/options-scanner-frontend/issues/11
- **AGENTS.md**: [AGENTS.md](../../AGENTS.md)

### 13.2 External References

- **Canvas API Performance Guide**: https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Optimizing_canvas
- **Virtual Scrolling Best Practices**: https://github.com/bvaughn/react-window
- **WCAG 2.1 Guidelines**: https://www.w3.org/WAI/WCAG21/quickref/

### 13.3 Competitive Examples

- **Thinkorswim**: Inline risk profile sparklines in scan results
- **Interactive Brokers Probability Lab**: Heat map probability display
- **TastyWorks Scanner**: Min/max profit badges

---

## Approval & Sign-Off

**Status**: âœ… Ready for Review

**Next Steps**:
1. Engineer: Implement MiniPayoutChart.tsx using Canvas API
2. Backend: Add `payoutChart` and `probability` fields to `/api/scan` response
3. Test: Verify <100ms chart render time with 1000 results

**Estimated Engineering Effort**: 2-3 days
- Day 1: MiniPayoutChart.tsx component + Canvas rendering
- Day 2: ProbabilityBadge.tsx + VirtualizedResultTable.tsx
- Day 3: Mobile ResultCard.tsx + responsive testing

---

**Design Version**: 1.0  
**Last Updated**: 2026-02-16  
**Designer**: UX Designer Agent
